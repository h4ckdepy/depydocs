<!doctype html>
<html lang="zh-cn" >
<head>
    <meta charset="utf-8">
    <link rel="icon" href="data:image/ico;base64,aWNv">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://file.depy.ink/theme/docs/css/bootstrap.min.css?v=8280" rel="stylesheet">
    <link href="https://file.depy.ink/theme/docs/css/main.css?v=3525" rel="stylesheet">
    <script src="https://file.depy.ink/theme/docs/js/jquery.min.js"></script>
    <script src="https://file.depy.ink/theme/docs/js/bootstrap.min.js?v=4094"></script>
    <script src="https://file.depy.ink/theme/docs/js/functions.js?v=8141"></script>
    <script src="https://file.depy.ink/theme/docs/js/marked.min.js"></script>
    <link href="https://file.depy.ink/theme/docs/css/doc.css?v=4299" rel="stylesheet">
    <link rel="stylesheet" href="https://file.depy.ink/assets/editor/editormd/css/editormd.css?v=6567" />
    <script src="https://file.depy.ink/assets/editor/editormd/editormd.js"></script>
    <script src="https://file.depy.ink/assets/editor/editormd/lib/marked.min.js"></script>
    <script src="https://file.depy.ink/assets/editor/editormd/lib/prettify.min.js"></script>

    <script src="https://file.depy.ink/theme/docs/js/pjax.min.js"></script>
    


    <script src="https://file.depy.ink/theme/docs/js/lightbox-plus-jquery.min.js"> </script>
    <link href="https://file.depy.ink/theme/docs/css/lightbox.css?v=3328" rel="stylesheet"><title>æŸOAæˆæƒç ´è§£åˆ†æ</title>
</head>

<body class="bg-light ready sticky" id="watermark">


             <nav class="navbar navbar-expand-lg navbar-light shadow-sm bg-white mybt2 sticky-top">
        <div class="container-fluid" style="max-width:1332px;">
            <a class="navbar-brand" href="/"><b class="">Depy's docs</b></a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav mr-auto">
                    <li class="nav-item active">
                        <a class="nav-link" href="/" >é¦–é¡µ</a>
                    </li>

                </ul>

            </div>
        </div>
    </nav>


<main>


<aside class="sidebar">
           <div class="sidebar-nav mt-2">
            <ul>
            <li>

 <p>ç¼–ç¨‹å¼€å‘</p>
    <ul>
<li><a href="/view/111.html">ğŸŒ¹ Dobbyä½¿ç”¨</a></li>
<li><a href="/view/77.html">ğŸ“‘ã€å‰ç«¯å¼€å‘ã€‘lightbox+pjaxæœ€ä½³å®è·µ</a></li>
<li><a href="/view/71.html">ğŸ“‘ã€NDKå¼€å‘ã€‘NDKé‡‡é›†ã€å‹ç¼©ã€åŠ å¯†ä¼ è¾“è®¾å¤‡ä¿¡æ¯</a></li>
<li><a href="/view/70.html">ğŸ“‘ã€NDKå¼€å‘ã€‘åŸºç¡€ç¯å¢ƒæ­å»º</a></li>
    </ul>
 <p>é€†å‘åˆ†æ</p>
    <ul>
<li><a href="/view/86.html">âš™ï¸ ã€Xposed æ”¹æœºã€‘- åŸºç¡€ç¯å¢ƒå®‰è£…</a></li>
<li><a href="/view/81.html">ğŸ’» å®‰å“å†…è”æ±‡ç¼–å¼€å‘</a></li>
<li><a href="/view/76.html">ğŸ“‘ JNI ä½¿ç”¨åŸºç¡€</a></li>
<li><a href="/view/75.html">ğŸ“‘ IDA Debugger è°ƒè¯•å™¨ä½¿ç”¨</a></li>
<li><a href="/view/74.html">ğŸ’» std::stringå†…å­˜å¸ƒå±€</a></li>
<li><a href="/view/73.html">ğŸ’¼ Fridaä½œä¸š-20231114</a></li>
<li><a href="/view/65.html">ğŸ§® JSVMPæ‰§è¡Œæµç¨‹åˆ†æ</a></li>
    </ul>
 <p>DepyDocs</p>
    <ul>
<li><a href="/view/122.html">ğŸ“‘ DepyDocs</a></li>
<li><a href="/view/120.html">ğŸ“‘  Un1kMsgä½¿ç”¨</a></li>
<li><a href="/view/114.html">ğŸ“‘ è”ç³»æ–¹å¼</a></li>
<li><a href="/view/91.html">ğŸ“‘ é¢å¤–é…ç½®</a></li>
<li><a href="/view/88.html">ğŸ“‘  æ›´æ–°æ—¥å¿—</a></li>
<li><a href="/view/72.html">ğŸ“‘ æ—¶å…‰æœºä½¿ç”¨</a></li>
<li><a href="/view/66.html">ğŸ“‘ DepyOauthæ¥å…¥æŒ‡å—</a></li>
<li><a href="/view/62.html">ğŸ“‘ å®˜æ–¹åŸŸåç”³è¯·</a></li>
<li><a href="/view/47.html">ğŸ“‘ ç§Ÿæˆ·è‡ªå®šä¹‰åŸŸåç»‘å®š</a></li>
    </ul>
 <p>åšå®¢æ–‡ç« ï¼ˆå¤‡ä»½ï¼‰</p>
    <ul>
<li><a href="/view/136.html">æµé‡åŠ å¯†ç¼–ç¨‹å¼€å‘</a></li>
<li><a href="/view/135.html">Attack PHP Website By Shiro</a></li>
<li><a href="/view/134.html">æŸOAæˆæƒç ´è§£åˆ†æ</a></li>
<li><a href="/view/133.html">Un1kHacking</a></li>
<li><a href="/view/132.html">Un1kLog4shellScan </a></li>
<li><a href="/view/131.html">Netty å¼€å‘Mitmè§£å†³è¯·æ±‚å“åº”åŒ¹é…é—®é¢˜	</a></li>
    </ul>
 <p>Todo</p>
    <ul>
<li><a href="/view/118.html">Todo List</a></li>
    </ul>
 <p>éšç¬”</p>
    <ul>
<li><a href="/view/128.html">å°å¹´</a></li>
<li><a href="/view/109.html">â¤ 2023</a></li>
    </ul>
 <p>æµ‹è¯•ç¬”è®°</p>
    <ul>
<li><a href="/view/129.html">ğŸ˜¡ å…³äºDDOSæˆ‘èƒ½åšä»€ä¹ˆ</a></li>
<li><a href="/view/123.html">ğŸ‘ æŸåŠ å¯†æ ·æœ¬ Traceåˆ†æ - 2</a></li>
<li><a href="/view/121.html">ğŸ‘ æŸåŠ å¯†æ ·æœ¬ Traceåˆ†æ</a></li>
<li><a href="/view/115.html">ğŸ”§ è½»é‡çº§CI/CD+æ–‡ä»¶å†…å®¹ç›‘æ§/é˜²ç¯¡æ”¹è§£å†³æ–¹æ¡ˆ</a></li>
<li><a href="/view/105.html">ğŸ¯ æœ‰ç”¨çš„å‘½ä»¤å¤‡ä»½</a></li>
<li><a href="/view/94.html">ğŸ˜Š Gateway-wokerå®ç°çƒ­é‡è½½</a></li>
<li><a href="/view/90.html">âœï¸ Xposedè¿è¡ŒåŸç†</a></li>
<li><a href="/view/89.html">AutoJS æ¨¡æ‹Ÿè´å¡å°”æ›²çº¿è§†é¢‘æ»‘åŠ¨</a></li>
<li><a href="/view/84.html">ğŸ“± å°ç±³13ç»•è¿‡SIMå¡æ‰“å¼€USBå®‰è£…</a></li>
    </ul>
 <p>è¯»ä¹¦ç¬”è®°</p>
    <ul>
<li><a href="/view/119.html">ğŸ“š æ³¨å…¥ä¸HOOK</a></li>
<li><a href="/view/117.html">ğŸ“šã€Šæ·±å…¥æ¢ç´¢å®‰å“çƒ­ä¿®å¤æŠ€æœ¯åŸç†ã€‹32 -</a></li>
<li><a href="/view/112.html">ğŸ“šã€Šæ·±å…¥æ¢ç´¢å®‰å“çƒ­ä¿®å¤æŠ€æœ¯åŸç†ã€‹1-32</a></li>
<li><a href="/view/82.html">ğŸ“šã€Šé€†å‘å·¥ç¨‹æƒå¨æŒ‡å—ã€‹ - 1-4ç« </a></li>
    </ul>


</li>
</ul></div>
</aside><section class="content mx-auto" id="article">
        <div class="d-flex">



            <article class="markdown-section" id="main" style="word-break:break-all;">
                <div>
                <h1>æŸOAæˆæƒç ´è§£åˆ†æ</h1>


                <a style="font-size:12px;color: #5f5d5d;">
                | æ—¶é—´: 2024-02-05 23:09:29| ç›®å½•:åšå®¢æ–‡ç« ï¼ˆå¤‡ä»½ï¼‰ </a>
                |
                <a style="font-size:12px;color: #007bff;" href="http://10.8.0.3:5080/tenantadmin/Tenantarticle/quickedit/quickedit.html?id=118" target="_blank">ç¼–è¾‘æœ¬æ–‡</a>
                <br>


                    <div id="content"><textarea style="display: none;">## åŸºç¡€åˆ†æ

é€šè¿‡æ–­ç‚¹ã€å…¨å±€æœç´¢ç­‰ä¸€äº›æ–¹å¼æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸æˆæƒæœ‰å…³çš„jaråŒ…æ˜¯LNParse.jarï¼ŒéªŒè¯æˆæƒæœ‰å…³çš„é€»è¾‘éƒ½åœ¨é‡Œé¢ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ç”¨jd-guiæ¥åç¼–è¯‘jaråŒ…åˆ†æã€‚

## ä»£ç åˆ†æ

åªèƒ½å¤Ÿä¸€æ­¥æ­¥æ…¢æ…¢çœ‹äº†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸»è¦çš„ç±»lnparse

![](https://img.meituan.net/imgupload/ed7f7786856d9e2fc547cb9f07ccb27312979.png)

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä»–ä½¿ç”¨äº† Zip.getZipSomeByteæ–¹æ³•

![](https://img.meituan.net/imgupload/40bdcecdecfdf097959d4cff89f30cfc7717.png)

åé¢æ‰¾åˆ°zipç±»ï¼Œå®šä½åˆ°è¿™ä¸ªæ–¹æ³•

![](https://img.meituan.net/imgupload/881888bb34e3fd5f9a07ed272b53d18923365.png)

ä»–çš„ä½œç”¨å®é™…ä¸Šå°±æ˜¯é€šè¿‡getEntries å¾—åˆ°è§£å‹zipæ–‡ä»¶å¾—åˆ°ä¸€ä¸ªå¯¹è±¡ã€‚

ç„¶ååˆ¤æ–­å¯¹è±¡ä¸­å­˜åœ¨çš„å…ƒç´ ï¼Œä¹Ÿå°±æ˜¯ç±»ä¼¼äºæ–‡ä»¶åˆ—è¡¨ï¼Œå½“zipArchiveEntryçš„åå­—åŒ¹é…åˆ°æ–¹æ³•è¾“å…¥çš„keyPathï¼Œåˆ™ä»¥å­—èŠ‚æ•°ç»„å½¢å¼è¿”å›æ–‡ä»¶è¾“å…¥æµã€‚

æ‰€ä»¥ä¸Šé¢çš„ä»£ç å°±æ˜¯æ£€æµ‹å‹ç¼©åŒ…çš„æ–‡ä»¶ï¼ˆlicenseã€publickeyã€lekã€license2ï¼‰ï¼Œå¹¶ä»¥äºŒè¿›åˆ¶æ•°ç»„ä¿å­˜åœ¨å˜é‡ä¸­ã€‚


![](https://img.meituan.net/imgupload/9263dd802ec1c3fa24d341c45c5ba9a228841.png)


è¿™é‡Œåšäº†ifåˆ¤æ–­ï¼Œå¾ˆæ˜¾ç„¶æ˜¯å¯¹*å¾®ç‰ˆæœ¬åšäº†åˆ¤æ–­ã€‚æ¯ä¸€ä¸ªç‰ˆæœ¬çš„realpublickeyéƒ½ä¸ä¸€æ ·ï¼Œé€šè¿‡æˆæƒæ—¶å€™èµ‹äºˆçš„ç‰ˆæœ¬æ¥èµ‹å€¼ã€‚

![](https://img.meituan.net/imgupload/b885c76a7d0f76292a6f3cc92f6a89735349.png)

è¿™é‡Œå¯¹publicKeyåšäº†base64ç¼–ç ï¼Œå¹¶å’ŒrealPublicKeyåšæ¯”è¾ƒã€‚å¦‚æœä¸ä¸€è‡´å°†ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ˜¾ç¤ºæˆæƒå¤±è´¥ã€‚

æ‰€ä»¥æˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†realpublickeyçš„baseè§£ç ä¿å­˜åœ¨æ–‡ä»¶ä¸­ï¼Œå‘½åä¸ºpublicKeyã€‚

![](https://img.meituan.net/imgupload/90a1b87c5568ed31f39509b98551c1ff7797.png)

ä¹‹åè¿›å…¥äº†ä¸€ä¸ªå°è¯•ï¼Œå¹¶åœ¨ä¹‹å‰å®šä¹‰äº†ä¸€ä¸ªjsonobjectã€‚licenseEncryptKeyæ–‡ä»¶ä¸­æå–çš„å†…å®¹ï¼Œä½¿ç”¨publickeyåšrsaè§£å¯†ã€‚ä¿å­˜åœ¨licenseKeyå˜é‡ä¸­ï¼Œä¹‹ååœ¨ä½¿ç”¨licenseKeyå¯¹licenseFileåšdesè§£å¯†ï¼ŒæŠŠjsonæ•°æ®å­˜å‚¨åˆ°jsonlicenseä¸­ã€‚

æˆ‘ä»¬å¯ä»¥åˆ†æå¾—åˆ°ï¼ŒlicenseKeyåœ¨è¿™é‡Œå°±æ˜¯ä¸€ä¸ªå¯†é’¥çš„ä½œç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´licenseEncryptKeyæ–‡ä»¶ä¿å­˜çš„æ˜¯ä¸€ä¸ªç”¨realPublicKeyå¯¹åº”ç§é’¥åŠ å¯†çš„keyã€‚

è‡³æ­¤æˆ‘ä»¬å¯ä»¥æ•´ç†å¾—åˆ°ä»¥ä¸‹ä¿¡æ¯ï¼š

1.licenseEncryptKeyæ”¾çš„æ˜¯jaræ–‡ä»¶ä¸­å…¬é’¥å¯¹åº”çš„ç§é’¥ï¼Œå†åŠ å¯†ä¸€ä¸²å­—ç¬¦ä¸²çš„åçš„æ•°æ®ã€‚

2.publicKeyæ”¾çš„æ˜¯realpublickeyçš„base64è§£ç çš„å†…å®¹æ–‡ä»¶ã€‚


![](https://img.meituan.net/imgupload/d18feb52c6e3020ac189d8c2bfaadc327356.png)


å¦‚æœè§£å¯†å¤±è´¥æŠ›å‡ºå¼‚å¸¸ï¼Œå°±ç”¨keyä½œä¸ºå¯†é’¥å»è§£å¯†license2æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œæ­¤æ—¶ç›´æ¥å¾—åˆ°äº†jsonæ•°æ®ã€‚

![](https://img.meituan.net/imgupload/906431a31fa1023d19c98c3395bf2a9412098.png)

ä¹‹åå»ºç«‹äº†ä¸€ä¸ªlnbå¯¹è±¡ï¼Œé€šè¿‡jsonæ•°æ®å–å€¼æ‹¿åˆ°å†…å®¹èµ‹å€¼ã€‚

ä¹‹åè¿›å…¥checkLicesneæ–¹æ³•ï¼Œå¸¦å…¥lnbå¯¹è±¡ï¼Œé€šè¿‡å¯¹è±¡æ–¹æ³•å–å€¼

![](https://img.meituan.net/imgupload/56f4d4b18aad078959fdd452fb24f36212068.png)

ç”¨ä¸€ä¸ªmd5å¯¹è±¡ å¯¹companynameï¼Œlicensecodeç­‰å‚æ•°è¿›è¡Œmd5åŠ å¯†ï¼Œå†ä¸lnbå¯¹è±¡ä¸­çš„licenseå¯¹è±¡è¿›è¡Œæ¯”è¾ƒï¼Œä¸”å¿…é¡»ç›¸ç­‰ã€‚

## åˆ†æ

1.licenseEncryptKeyæ”¾çš„æ˜¯jaræ–‡ä»¶ä¸­å…¬é’¥å¯¹åº”çš„ç§é’¥åŠ å¯†ä¸€ä¸²å­—ç¬¦ä¸²çš„åçš„æ•°æ®ï¼Œç›¸å½“äºçš„desè§£å¯†å¯†é’¥çš„åŠ å¯†å†…å®¹ã€‚

2.publicKeyæ”¾çš„æ˜¯realpublickeyçš„base64è§£ç çš„å†…å®¹æ–‡ä»¶ã€‚

3.licenseæ–‡ä»¶ä¸­å­˜æ”¾ç€jsonæ•°æ®ï¼Œä½†æ˜¯æ•°æ®ç»è¿‡äº†desåŠ å¯†

4.license2åªæœ‰æ•è·äº†å¼‚å¸¸æ‰å¿…è¦ï¼Œå¯ä»¥ä¸éœ€è¦

5.jsonæ ¼å¼ä¸­éœ€è¦çš„é”®:companynameã€å…¬å¸åã€‘ã€hrmnumã€ç³»ç»Ÿæœ€å¤§ä½¿ç”¨äººæ•°ã€‘ã€concurrentflagã€licensecodeã€æœºå™¨ç ã€‘ã€expiredateã€ä½¿ç”¨æœ‰æ•ˆæœŸã€‘ã€licenseã€MD5ï¼Œæ¥æºäºä¸Šå›¾ä¸­çš„srcåŠ å¯†æ–¹å¼ã€‘ã€cidã€scTypeã€scCountã€‚

æˆ‘ä»¬å¯ä»¥æ¸…æ¥šçš„çŸ¥é“ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰é»˜è®¤jaræ–‡ä»¶ä¸­å…¬é’¥å¯¹åº”çš„ç§é’¥ï¼Œæ‰€ä»¥åœ¨rsaè§£å¯†çš„æ—¶å€™ä¼šå¤±è´¥ï¼Œå› ä¸ºä¸åŒ¹é…ã€‚

## ç ´è§£æ€è·¯

1.ä¿®æ”¹jaråŒ…çš„å…¬é’¥ä¸ºè‡ªå·±çš„å…¬é’¥ï¼ˆæœ¬åœ°å­˜å‚¨å¯¹åº”ç§é’¥ï¼‰ï¼Œé‡æ–°æ‰“åŒ…

2.è®¾ç½®å…¬å¸åã€æœºå™¨ç ã€ä½¿ç”¨äººæ•°ã€æœ‰æ•ˆæœŸç­‰é”®ï¼ˆkeyï¼‰ï¼Œå†æ ¹æ®è¿™äº›å€¼ç”Ÿæˆmd5ï¼ˆvalueï¼‰å†™å…¥licenseé”®ä¸­ï¼Œä¿å­˜æˆä¸€ä¸ªjsonå­—ç¬¦ä¸²

3.è®¾ç½®deså¯†é’¥ä¸ºdepyï¼Œå¯¹jsonæ•°æ®è¿›è¡ŒåŠ å¯†

4.åŠ å¯†æ•°æ®å­˜å…¥licenseæ–‡ä»¶ä¸­

5.ä½¿ç”¨è¦†ç›–åçš„å…¬é’¥å¯¹åº”çš„ç§é’¥å¯¹depyè¿›è¡ŒåŠ å¯†ï¼Œå­˜å‚¨åœ¨licenseEncryptKeyæ–‡ä»¶ä¸­

6.å°†ä¿®æ”¹åçš„å…¬é’¥å­˜å‚¨åœ¨publicKeyæ–‡ä»¶ä¸­

7.ç”±äºä¼šå­˜åœ¨æ–‡ä»¶è§£å‹

![](https://img.meituan.net/imgupload/2a94aa7922d818c2196554bfcd5cfb4f20644.png)

è™½ç„¶åšäº†å¼‚å¸¸æ•è·ï¼Œä½†æ˜¯å°½é‡å†™ä¸€ä¸ªç©ºç™½çš„license2ï¼Œç”±äºåœ¨ç¬¬ä¸€æ­¥çš„tryå°±è¿”å›å®Œæ¯•äº†jsonæ•°æ®ï¼Œå®ƒä¸ä¼šå¯¹æˆ‘ä»¬æˆæƒäº§ç”Ÿå½±å“ã€‚

8.è¦†ç›–ljstln.jaræ–‡ä»¶ï¼Œé‡å¯xxç³»ç»Ÿï¼Œå°†å››ä¸ªæ–‡ä»¶å‹ç¼©æˆzipæ–‡ä»¶ï¼Œå†æ”¹æˆåå­—ä¸º.licenseç»“å°¾çš„æ–‡ä»¶å³å¯ï¼ˆæˆæƒç•Œé¢çš„æ–‡ä»¶ä¸Šä¼ ç±»å‹é™åˆ¶ï¼‰

## æ•ˆæœå¦‚ä¸‹

![](https://img.meituan.net/imgupload/58d0083b87b398ddec039daf9392342947048.png)

![](https://img.meituan.net/imgupload/51ae4c1833d05daee30e4d76322e7876453303.png)

![](https://img.meituan.net/imgupload/bb1c8737ab9aef82a9f8747ef9382309387784.png)



*æ³¨æ„:æœ¬æ–‡ä»…ä½œå®‰å…¨æœ‰å…³çš„ä»£ç åˆ†æå°è¯•ï¼Œè¯·æ”¯æŒæ­£ç‰ˆï¼ŒæŠµåˆ¶éæ³•ç ´è§£ã€‚æœ¬äººä¸ä¼šæä¾›ä»»ä½•éæ³•æˆæƒæœåŠ¡ï¼Œè¯·çŸ¥æ‚‰ã€‚*</textarea></div>


                <script>
                   $(function () {
                        
                        editormd.markdownToHTML("content");
                    })

                </script>




                </div>

                <hr>


                <div>
                    <h5>Â© ç‰ˆæƒå£°æ˜ï¼šéæ ‡æ³¨ã€è½¬è½½ã€æƒ…å†µä¸‹æœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå½’&nbsp;<a href="/">Depy's docs</a>&nbsp;æ‰€æœ‰ï¼Œè½¬è½½è¯·è”ç³»åšä¸»è·å¾—æˆæƒã€‚</h5>
                </div>

            </article>



    <div class="ad d-none d-lg-block">

        <div style="margin-left: 20px;margin-bottom:15px;font-weight:bold"> ã€ç›®å½•ã€ </div>
    <div class="anchorContent" id="anchorContent"> </div>
                       </div>

            </div>
    </section>
    <button class="sidebar-toggle sidebar-toggle-button" aria-label="Menu">
        <div><span></span><span></span><span></span></div>
    </button>

</main>

<link href="https://file.depy.ink/theme/docs/css/prettify.css?v=5530" rel="stylesheet">
<script src="https://file.depy.ink/theme/docs/js/prettify.js?v=5764"></script>
<script src="https://file.depy.ink/theme/docs/js/view.js?v=4125"></script>



<script>


    
    function addWatermark({
        container = document.body, 
        width = "220px", 
        height = "160px", 
        textAlign = "center", 
        textBaseline = "middle", 
        font = "16px Microsoft Yahei", 
        fillStyle = "rgba(184, 184, 184, 0.6)", 
        content = "depy|rce.ink", 
        rotate = "45", 
        zIndex = 10000, 
    }) {
        
        const canvas = document.createElement("canvas");
        canvas.setAttribute("width", width);
        canvas.setAttribute("height", height);
        const ctx = canvas.getContext("2d");
        ctx.textAlign = textAlign;
        ctx.textBaseline = textBaseline;
        ctx.font = font;
        ctx.fillStyle = fillStyle;
        ctx.rotate((Math.PI / 180) * rotate);
        ctx.fillText(content, parseFloat(width) / 2, parseFloat(height) / 2);

        
        const base64Url = canvas.toDataURL();
        const __wm = document.querySelector('.__wm');
        const watermarkDiv = __wm || document.createElement("div");
        const styleStr = `
                    position: fixed;
                    top: -70px;
                    left: 0;
                    bottom: 0;
                    right: 0;
                    width: 100%;
                    height: 100%;
                    z-index: ${zIndex};
                    pointer-events: none;
                    background-repeat: repeat;
                    background-image: url('${base64Url}')
                `;
        watermarkDiv.setAttribute("style", styleStr);
        watermarkDiv.classList.add("__wm");
        

        if (!__wm) {
            container.style.position = 'relative';
            container.insertBefore(watermarkDiv, container.firstChild);
        }
            
            const MutationObserver = window.MutationObserver || window.WebKitMutationObserver;
            if (MutationObserver) {
                let mo = new MutationObserver(function () {
                    const __wm = document.querySelector('.__wm');
                    
                    if ((__wm && __wm.getAttribute('style') !== styleStr) || !__wm) {
                        
                        mo.disconnect();
                        mo = null;
                        console.log('1');
                        addWatermark({
                            container: document.getElementById("watermark"),
                            width: "220px",
                            height: "160px",
                            textAlign: "center",
                            textBaseline: "middle",
                            font: "16px Microsoft Yahei",
                            fillStyle: "rgba(184, 184, 184, 0.3 )",
                            content: "depy|rce.ink",
                            rotate: "30",
                            zIndex: 10000,
                        });
                    }
                });

                mo.observe(container, {
                    attributes: true,
                    subtree: true,
                    childList: true
                });
            }
    }



    function addwm(){
    addWatermark({
        container: document.getElementById("watermark"),
        width: "220px",
        height: "160px",
        textAlign: "center",
        textBaseline: "middle",
        font: "16px Microsoft Yahei",
        fillStyle: "rgba(184, 184, 184, 0.3 )",
        content: "depy|rce.ink",
        rotate: "30",
        zIndex: 10000,
    });
}

addwm();
</script>

</body>
</html>